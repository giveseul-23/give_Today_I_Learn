<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="HR">
	
	<!-- 전체조회  -->
	<select id="all" resultType="com.bc.model.vo.EmployeeVO">
		SELECT * FROM EMPLOYEES
		 ORDER BY employee_id
	</select>
	
	<!-- 부서번호 조회 -->
	<select id="dept" parameterType="String" resultType="com.bc.model.vo.EmployeeVO">
		SELECT * FROM EMPLOYEES
		 WHERE DEPARTMENT_ID = #{department_id}
	 	ORDER BY EMPLOYEE_ID
	</select>
	
	<!-- 이름 조회 -->
	<select id="name" parameterType="String" resultType="com.bc.model.vo.EmployeeVO">
		SELECT * FROM EMPLOYEES
		 WHERE FIRST_NAME = INITCAP(#{first_name})
    	 OR LAST_NAME = INITCAP(#{last_name})
		ORDER BY EMPLOYEE_ID
	</select>
	
	<!-- 동적 조회 -->
	<select id="search" parameterType="Map" resultType="com.bc.model.vo.EmployeeVO">
		SELECT * FROM EMPLOYEES
		 <choose>
		 	<when test="idx==0">
		 	<!-- 사번 -->
		 		WHERE EMPLOYEE_ID = #{keyword}
		 	</when>
		 	<when test="idx==1">
		 	<!-- 이름 -->
		 		WHERE FIRST_NAME = INITCAP(#{keyword})
    	 		 OR LAST_NAME = INITCAP(#{keyword})
		 	</when>
		 	<when test="idx==2">
		 	<!-- 직종 -->
		 		WHERE JOB_ID = UPPER(#{keyword})
		 	</when>
		 	<when test="idx==3">
		 	<!-- 부서 -->
		 		WHERE DEPARTMENT_ID = #{keyword}
		 	</when>
		 	<otherwise>
		 		WHERE 2 = 1
		 	</otherwise>
		 </choose>
		ORDER BY EMPLOYEE_ID
	</select>
	
</mapper>









